<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OBS Stopwatch</title>
</head>

<body>
    <div id="timer">00:00:00</div>

    <!-- Hidden elements for updating hotkeys -->
    <div id="hotkey-settings" style="display: none;">
        <label>
            Start: <input type="text" id="start-hotkey-input" placeholder="e.g., Digit1 for '1'" />
        </label>
        <label>
            Stop: <input type="text" id="stop-hotkey-input" placeholder="e.g., Digit2 for '2'" />
        </label>
        <label>
            Reset: <input type="text" id="reset-hotkey-input" placeholder="e.g., Digit3 for '3'" />
        </label>
        <button onclick="updateHotkeys()">Update Hotkeys</button>
    </div>

    <!-- Button to show/hide hotkey settings -->
    <button onclick="toggleHotkeySettings()">Change Hotkeys</button>

    <script>
        let timerInterval;
        let startTime;
        let elapsedTime = 0;

        function updateDisplay(time) {
            const date = new Date(time);
            const minutes = String(date.getMinutes()).padStart(2, '0');
            const seconds = String(date.getSeconds()).padStart(2, '0');
            const milliseconds = String(date.getMilliseconds()).substr(0, 2);
            document.getElementById('timer').textContent = `${minutes}:${seconds}:${milliseconds}`;
        }

        function startTimer() {
            if (!timerInterval) {
                startTime = Date.now() - (elapsedTime || 0);
                timerInterval = setInterval(function () {
                    elapsedTime = Date.now() - startTime;
                    updateDisplay(elapsedTime);
                }, 10);
            }
        }

        function stopTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
        }

        function resetTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
            elapsedTime = 0;
            updateDisplay(0);
        }

        // Initial Hotkey assignments
        let START_HOTKEY = 'Digit1';  // Ctrl + Shift + 1
        let STOP_HOTKEY = 'Digit2';   // Ctrl + Shift + 2
        let RESET_HOTKEY = 'Digit3';  // Ctrl + Shift + 3

        // Hotkey listeners
        document.addEventListener('keydown', function (event) {
            if (event.ctrlKey && event.shiftKey) {
                switch (event.code) {
                    case START_HOTKEY:
                        startTimer();
                        break;
                    case STOP_HOTKEY:
                        stopTimer();
                        break;
                    case RESET_HOTKEY:
                        resetTimer();
                        break;
                }
            }
        });

        // Toggle visibility of the hotkey settings
        function toggleHotkeySettings() {
            const settings = document.getElementById('hotkey-settings');
            if (settings.style.display === 'none') {
                settings.style.display = 'block';
            } else {
                settings.style.display = 'none';
            }
        }

        // Update the hotkeys based on user input
        function updateHotkeys() {
            START_HOTKEY = document.getElementById('start-hotkey-input').value;
            STOP_HOTKEY = document.getElementById('stop-hotkey-input').value;
            RESET_HOTKEY = document.getElementById('reset-hotkey-input').value;
            alert('Hotkeys updated!');
            toggleHotkeySettings();  // Hide the settings after updating
        }
    </script>
</body>

</html>
